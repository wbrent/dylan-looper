#N canvas 154 206 543 617 12;
#X declare -path ./lib;
#X declare -path ./lib/quack;
#N canvas 661 98 1008 476 master-control-panel 0;
#N canvas 1065 45 814 587 init 0;
#X obj 47 312 declare -path ./lib;
#X obj 47 32 loadbang;
#X obj 47 56 t b b b b;
#X obj 47 230 s lb4;
#X obj 167 140 s lb1;
#X obj 127 170 s lb2;
#X obj 87 200 s lb3;
#X obj 285 47 r lb1;
#X obj 47 342 declare -path ./lib/quack;
#X obj 545 47 r lb1;
#X msg 545 82 \; perf-1-remote-audio-set 1 \; perf-2-remote-audio-set
1 \; perf-3-remote-audio-set 1 \; perf-4-remote-audio-set 1 \;;
#X msg 285 357 \; pd dsp 1 \;;
#X obj 285 317 r lb4;
#X obj 545 177 r lb2;
#X msg 545 212 \; metronome-switch-set 1 \;;
#X msg 285 82 \; perf-1-pan-set 0.5 \; perf-2-pan-set 0.5 \; perf-3-pan-set
0.5 \; perf-4-pan-set 0.5 \; metronome-volume-set 80 \; metronome-dac-stereo-set
0 \; main-volume-set 100 \; tempo-set 90 \; time-sig-set 4 \; bars-per-loop-set
1 \; limiter-switch-set 1 \;;
#X msg 545 410 \; perf-\$1-buf-A-decay-rate-set 0 \; perf-\$1-buf-B-decay-rate-set
0 \; perf-\$1-sig-target-set 0 \; perf-\$1-buf-A-gain-set 0 \; perf-\$1-buf-B-gain-set
0 \; perf-\$1-live-gain-set 0 \; perf-\$1-main-volume-set 100 \;;
#X obj 545 277 r lb1;
#X msg 545 301 4;
#X obj 545 325 t f b;
#X obj 545 379 f;
#X obj 585 383 + 1;
#X msg 568 352 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 2 1 6 0;
#X connect 2 2 5 0;
#X connect 2 3 4 0;
#X connect 7 0 15 0;
#X connect 9 0 10 0;
#X connect 12 0 11 0;
#X connect 13 0 14 0;
#X connect 17 0 18 0;
#X connect 18 0 19 0;
#X connect 19 0 20 0;
#X connect 19 1 22 0;
#X connect 20 0 21 0;
#X connect 20 0 16 0;
#X connect 21 0 20 1;
#X connect 22 0 20 1;
#X restore 505 65 pd init;
#N canvas 993 485 846 433 compute-loop-dur 0;
#X obj 181 132 f;
#X obj 181 175 select 0;
#X obj 181 245 f;
#X text 199 215 only update on loop reset;
#X floatatom 271 315 10 0 0 1 ms - - 0;
#X obj 536 291 t b f;
#X obj 470 323 * 1;
#X obj 536 266 + 1;
#X obj 536 148 t b f;
#X obj 470 183 * 1;
#X obj 536 123 r time-sig;
#X obj 536 243 r bars-per-loop;
#X obj 181 346 s loop-dur;
#X obj 181 45 r beat;
#X obj 181 308 change;
#X obj 181 85 select 0;
#X obj 470 54 r beat-inter-onset-ms;
#X obj 221 132 r bar;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 4 0;
#X connect 2 0 14 0;
#X connect 5 0 6 0;
#X connect 5 1 6 1;
#X connect 6 0 2 1;
#X connect 7 0 5 0;
#X connect 8 0 9 0;
#X connect 8 1 9 1;
#X connect 9 0 6 0;
#X connect 10 0 8 0;
#X connect 11 0 7 0;
#X connect 13 0 15 0;
#X connect 14 0 12 0;
#X connect 15 0 0 0;
#X connect 16 0 9 0;
#X connect 17 0 0 1;
#X restore 695 95 pd compute-loop-dur;
#X obj 276 51 cnv 15 143 208 empty empty Time 5 12 0 14 #c4fcc4 #202020
0;
#X obj 287 94 vradio 15 1 0 8 bars-per-loop bars-per-loop-set bars/loop
0 -8 0 12 #fcfcfc #000000 #000000 0;
#X floatatom 317 140 5 2 6 2 time-sig time-sig-set time-sig 0;
#X obj 41 51 cnv 15 234 208 empty empty Inputs 5 12 0 14 #dcdcdc #202020
0;
#X obj 241 84 vsl 15 128 40 100 0 0 metronome-volume metronome-volume-set
empty 0 -9 0 10 #fcfcfc #000000 #000000 0 1;
#X text 243 86 metronome, f 1;
#X obj 221 84 vsl 15 128 40 100 0 0 main-volume main-volume-set empty
0 -9 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 90 98 vu 26 120 perf-2-vu empty -1 -8 0 10 #404040 #000000 0
0;
#X obj 50 98 vu 26 120 perf-1-vu empty -1 -8 0 10 #404040 #000000 0
0;
#X floatatom 317 210 5 2 6 1 beat beat-display - 0;
#X floatatom 317 190 5 2 6 1 bar bar-display - 0;
#N canvas 632 332 1114 531 DSP 0;
#X obj 52 202 perf-signal-routing 1;
#X obj 292 202 perf-signal-routing 2;
#X obj 52 255 *~;
#X obj 976 221 dbtorms;
#X obj 976 244 pack f 40;
#X obj 976 267 line~;
#X obj 976 148 moses 41;
#X obj 976 171 t b;
#X msg 976 194 0;
#X obj 976 115 r main-volume;
#X obj 292 255 *~;
#X obj 92 125 env~;
#X obj 92 148 - 100;
#X obj 92 171 s perf-1-vu;
#X obj 332 125 env~;
#X obj 332 148 - 100;
#X obj 332 171 s perf-2-vu;
#X obj 522 255 *~;
#X obj 762 255 *~;
#X obj 562 125 env~;
#X obj 562 148 - 100;
#X obj 802 125 env~;
#X obj 802 148 - 100;
#X obj 562 171 s perf-3-vu;
#X obj 522 202 perf-signal-routing 3;
#X obj 762 202 perf-signal-routing 4;
#X obj 802 171 s perf-4-vu;
#X obj 52 297 pan~;
#X obj 92 297 r perf-1-pan;
#X obj 292 297 pan~;
#X obj 522 297 pan~;
#X obj 762 297 pan~;
#X obj 332 297 r perf-2-pan;
#X obj 562 297 r perf-3-pan;
#X obj 802 297 r perf-4-pan;
#N canvas 476 131 726 490 limiter 0;
#N canvas 0 50 450 250 (subpatch) 0;
#X array \$0-dynamic-curve 102 float 3;
#A 0 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23
24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46
47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69
70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92
92.95 93.8 94.55 95.2 95.75 96.2 96.55 96.8 96.95;
#X coords 0 100 102 0 202 200 1 0 0;
#X restore 454 50 graph;
#N canvas 557 25 760 864 parameters 0;
#X obj 367 19 inlet;
#X obj 490 150 s \$0-speed;
#X obj 367 289 s \$0-limit;
#X obj 391 265 s \$0-knee;
#X obj 416 241 s \$0-boost;
#X obj 440 214 s \$0-ratio;
#X obj 367 124 unpack 0 0 0 0 0 0;
#X obj 465 183 s \$0-thresh;
#X obj 50 84 r \$0-limit;
#X obj 58 107 r \$0-knee;
#X obj 66 130 r \$0-boost;
#X obj 82 174 r \$0-thresh;
#X obj 75 152 r \$0-ratio;
#X obj 50 210 b;
#X obj 50 235 del 0;
#X obj 50 260 t b b;
#X obj 50 310 until;
#X obj 108 337 + 1;
#X msg 99 307 0;
#X obj 117 807 tabwrite \$0-dynamic-curve, f 52;
#X obj 498 565 moses;
#X obj 569 515 r \$0-thresh;
#X obj 631 552 r \$0-ratio;
#X obj 631 579 f;
#X obj 631 604 / 100;
#X obj 117 753 +;
#X msg 530 591 0;
#X obj 508 658 expr ($f1-$f2)*$f3;
#X obj 117 778 max 0;
#X obj 631 629 - 1;
#X obj 50 430 +;
#X obj 68 403 r \$0-boost;
#X obj 138 432 r \$0-limit;
#X obj 120 465 f;
#X obj 138 490 -;
#X obj 50 465 t f b;
#X obj 292 419 r \$0-knee;
#X obj 203 558 +;
#X obj 82 532 -;
#X obj 50 559 moses;
#X obj 117 589 moses;
#X obj 144 653 b;
#X obj 380 586 r \$0-limit;
#X obj 164 686 f;
#X obj 117 621 expr $f4 - ($f2-$f1)*($f2-$f1)/(4*$f3);
#X obj 72 600 +;
#X msg 50 285 102;
#X obj 292 444 f;
#X obj 292 469 / 2;
#X obj 396 66 loadbang;
#X msg 396 91 100 0 0 100 0 50;
#X obj 156 465 r \$0-boost;
#X obj 107 557 r \$0-boost;
#X obj 50 368 trigger float float, f 61;
#X obj 182 652 r \$0-limit;
#X obj 50 335 float;
#X obj 220 137 setctl \$0-ratio;
#X obj 220 162 setctl \$0-thresh;
#X obj 220 187 setctl \$0-speed;
#X obj 220 213 setctl \$0-limit;
#X obj 220 237 setctl \$0-knee;
#X obj 220 262 setctl \$0-boost;
#X connect 0 0 6 0;
#X connect 6 0 2 0;
#X connect 6 1 3 0;
#X connect 6 2 4 0;
#X connect 6 3 5 0;
#X connect 6 4 7 0;
#X connect 6 5 1 0;
#X connect 8 0 13 0;
#X connect 9 0 13 0;
#X connect 10 0 13 0;
#X connect 11 0 13 0;
#X connect 12 0 13 0;
#X connect 13 0 14 0;
#X connect 14 0 15 0;
#X connect 15 0 46 0;
#X connect 15 1 18 0;
#X connect 16 0 55 0;
#X connect 17 0 55 1;
#X connect 18 0 55 1;
#X connect 20 0 27 0;
#X connect 20 1 26 0;
#X connect 21 0 20 1;
#X connect 21 0 27 1;
#X connect 22 0 23 0;
#X connect 23 0 24 0;
#X connect 24 0 29 0;
#X connect 25 0 28 0;
#X connect 26 0 25 1;
#X connect 27 0 25 1;
#X connect 28 0 19 0;
#X connect 29 0 27 2;
#X connect 30 0 35 0;
#X connect 31 0 30 1;
#X connect 32 0 33 1;
#X connect 33 0 34 0;
#X connect 34 0 37 0;
#X connect 34 0 38 0;
#X connect 35 0 39 0;
#X connect 35 1 33 0;
#X connect 36 0 47 0;
#X connect 37 0 40 1;
#X connect 37 0 44 1;
#X connect 38 0 39 1;
#X connect 39 0 45 0;
#X connect 39 1 40 0;
#X connect 40 0 44 0;
#X connect 40 1 41 0;
#X connect 41 0 43 0;
#X connect 42 0 44 3;
#X connect 43 0 25 0;
#X connect 44 0 25 0;
#X connect 45 0 25 0;
#X connect 46 0 16 0;
#X connect 47 0 48 0;
#X connect 48 0 38 1;
#X connect 48 0 37 1;
#X connect 48 0 44 2;
#X connect 49 0 50 0;
#X connect 50 0 6 0;
#X connect 51 0 34 1;
#X connect 52 0 45 1;
#X connect 53 0 30 0;
#X connect 53 1 19 1;
#X connect 53 1 20 0;
#X connect 54 0 43 1;
#X connect 55 0 17 0;
#X connect 55 0 53 0;
#X restore 96 433 pd parameters;
#X floatatom 400 80 3 0 100 0 limit \$0-limit-set \$0-limit 0;
#X floatatom 400 101 3 0 20 0 knee \$0-knee-set \$0-knee 0;
#X floatatom 400 122 3 0 50 0 boost \$0-boost-set \$0-boost 0;
#X floatatom 400 143 3 0 200 0 ratio \$0-ratio-set \$0-ratio 0;
#X floatatom 400 165 3 0 100 0 thresh \$0-thresh-set \$0-thresh 0;
#X floatatom 400 186 3 0 200 0 speed \$0-speed-set \$0-speed 0;
#N canvas 917 248 503 643 run-compander 0;
#X obj 77 30 inlet~;
#X obj 113 184 slop~ 0 0 0 0 1e+09;
#X obj 191 92 r \$0-speed;
#X obj 191 117 f;
#X obj 191 142 / 10;
#X obj 113 152 abs~;
#X obj 127 288 tabread4~ \$0-dynamic-curve;
#X obj 95 338 -~;
#X obj 95 363 +~ 100;
#X obj 95 388 dbtorms~;
#X obj 113 256 rmstodb~;
#X obj 77 438 *~;
#X obj 77 573 outlet~;
#X text 271 178 same envelope follower as in the peak meter example
, f 26;
#X text 160 332 "correct" the level by applying a gain calculated from
the difference between the measured and desired level, f 27;
#X obj 77 482 *~;
#X obj 37 482 *~;
#X msg 184 527 1;
#X obj 184 551 -;
#X obj 184 503 t b f;
#X obj 184 479 r limiter-switch;
#X connect 0 0 5 0;
#X connect 0 0 11 0;
#X connect 0 0 16 0;
#X connect 1 0 10 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 1 3;
#X connect 5 0 1 0;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 9 0 11 1;
#X connect 10 0 7 1;
#X connect 10 0 6 0;
#X connect 11 0 15 0;
#X connect 15 0 12 0;
#X connect 16 0 12 0;
#X connect 17 0 18 0;
#X connect 18 0 16 1;
#X connect 19 0 17 0;
#X connect 19 1 18 1;
#X connect 20 0 19 0;
#X connect 20 0 15 1;
#X restore 58 122 pd run-compander;
#X msg 107 297 100 0 0 200 100 100;
#X msg 157 391 100 0 0 100 0 50;
#X text 278 390 no change;
#X text 220 271 limit;
#X text 249 295 expand;
#X text 249 328 compress;
#X text 253 364 noise gate;
#X msg 127 365 100 0 0 200 60 30;
#X msg 117 328 100 0 0 50 100 100;
#X obj 58 62 inlet~;
#X obj 58 182 outlet~;
#X obj 97 230 loadbang;
#X msg 97 270 97 10 0 100 0 50;
#X obj 208 62 inlet~;
#X obj 208 182 outlet~;
#N canvas 917 248 503 643 run-compander 0;
#X obj 77 30 inlet~;
#X obj 113 184 slop~ 0 0 0 0 1e+09;
#X obj 191 92 r \$0-speed;
#X obj 191 117 f;
#X obj 191 142 / 10;
#X obj 113 152 abs~;
#X obj 127 288 tabread4~ \$0-dynamic-curve;
#X obj 95 338 -~;
#X obj 95 363 +~ 100;
#X obj 95 388 dbtorms~;
#X obj 113 256 rmstodb~;
#X obj 77 438 *~;
#X obj 77 573 outlet~;
#X text 271 178 same envelope follower as in the peak meter example
, f 26;
#X text 160 332 "correct" the level by applying a gain calculated from
the difference between the measured and desired level, f 27;
#X obj 77 482 *~;
#X obj 37 482 *~;
#X msg 184 527 1;
#X obj 184 551 -;
#X obj 184 503 t b f;
#X obj 184 479 r limiter-switch;
#X connect 0 0 5 0;
#X connect 0 0 11 0;
#X connect 0 0 16 0;
#X connect 1 0 10 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 1 3;
#X connect 5 0 1 0;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 9 0 11 1;
#X connect 10 0 7 1;
#X connect 10 0 6 0;
#X connect 11 0 15 0;
#X connect 15 0 12 0;
#X connect 16 0 12 0;
#X connect 17 0 18 0;
#X connect 18 0 16 1;
#X connect 19 0 17 0;
#X connect 19 1 18 1;
#X connect 20 0 19 0;
#X connect 20 0 15 1;
#X restore 208 122 pd run-compander;
#X connect 8 0 19 0;
#X connect 9 0 1 0;
#X connect 10 0 1 0;
#X connect 16 0 1 0;
#X connect 17 0 1 0;
#X connect 18 0 8 0;
#X connect 20 0 21 0;
#X connect 21 0 1 0;
#X connect 22 0 24 0;
#X connect 24 0 23 0;
#X coords 0 490 1 489 120 40 0;
#X restore 411 402 pd limiter;
#X obj 411 458 dac~ 1 2;
#X text 544 402 limit to -3dB, f 15;
#X obj 52 82 perf-signal-abs 1;
#X obj 762 82 perf-signal-abs 4;
#X obj 522 82 perf-signal-abs 3;
#X obj 292 82 perf-signal-abs 2;
#X obj 788 415 s~ full-mix-signal;
#X connect 0 0 2 0;
#X connect 1 0 10 0;
#X connect 2 0 27 0;
#X connect 2 0 42 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 5 0 10 1;
#X connect 5 0 2 1;
#X connect 5 0 18 1;
#X connect 5 0 17 1;
#X connect 6 0 7 0;
#X connect 6 1 3 0;
#X connect 7 0 8 0;
#X connect 8 0 3 0;
#X connect 9 0 6 0;
#X connect 10 0 29 0;
#X connect 10 0 42 0;
#X connect 11 0 12 0;
#X connect 12 0 13 0;
#X connect 14 0 15 0;
#X connect 15 0 16 0;
#X connect 17 0 30 0;
#X connect 17 0 42 0;
#X connect 18 0 31 0;
#X connect 18 0 42 0;
#X connect 19 0 20 0;
#X connect 20 0 23 0;
#X connect 21 0 22 0;
#X connect 22 0 26 0;
#X connect 24 0 17 0;
#X connect 25 0 18 0;
#X connect 27 0 35 0;
#X connect 27 1 35 1;
#X connect 28 0 27 1;
#X connect 29 0 35 0;
#X connect 29 1 35 1;
#X connect 30 0 35 0;
#X connect 30 1 35 1;
#X connect 31 0 35 0;
#X connect 31 1 35 1;
#X connect 32 0 29 1;
#X connect 33 0 30 1;
#X connect 34 0 31 1;
#X connect 35 0 36 0;
#X connect 35 1 36 1;
#X connect 38 0 11 0;
#X connect 38 0 0 0;
#X connect 39 0 21 0;
#X connect 39 0 25 0;
#X connect 40 0 19 0;
#X connect 40 0 24 0;
#X connect 41 0 14 0;
#X connect 41 0 1 0;
#X restore 505 185 pd DSP;
#X floatatom 317 160 5 20 480 1 tempo tempo-set tempo 0;
#X obj 170 98 vu 26 120 perf-4-vu empty -1 -8 0 10 #404040 #000000
0 0;
#X obj 130 98 vu 26 120 perf-3-vu empty -1 -8 0 10 #404040 #000000
0 0;
#N canvas 292 347 257 215 OSC 0;
#X obj 44 40 perf-osc-receive 1 5004;
#X obj 44 70 perf-osc-receive 2 5005;
#X obj 44 100 perf-osc-receive 3 5006;
#X obj 44 130 perf-osc-receive 4 5007;
#X restore 505 215 pd OSC;
#X obj 52 82 hsl 24 8 0 1 0 0 perf-1-pan perf-1-pan-set empty -2 -8
0 10 #fcfcfc #000000 #000000 0 1;
#X obj 92 82 hsl 24 8 0 1 0 0 perf-2-pan perf-2-pan-set empty -2 -8
0 10 #fcfcfc #000000 #000000 0 1;
#X obj 132 82 hsl 24 8 0 1 0 0 perf-3-pan perf-3-pan-set empty -2 -8
0 10 #fcfcfc #000000 #000000 0 1;
#X obj 172 82 hsl 24 8 0 1 0 0 perf-4-pan perf-4-pan-set empty -2 -8
0 10 #fcfcfc #000000 #000000 0 1;
#X obj 241 222 tgl 15 0 metronome-dac-stereo metronome-dac-stereo-set
m 4 7 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 505 245 perf-midi-map 1;
#X text 632 245 << this allows for solo practice using Performer 1
controls, f 21;
#X text 223 86 Volume, f 1;
#N canvas 1114 68 679 492 metronome-data 0;
#X obj 161 259 r time-sig;
#X obj 71 381 s beat;
#X obj 355 242 + 1;
#X obj 395 55 r tempo;
#X obj 71 187 metro;
#X obj 395 79 t b f;
#X msg 395 103 60000;
#X obj 395 127 /;
#X obj 71 241 f;
#X obj 121 235 + 1;
#X obj 121 259 %;
#X obj 395 151 s beat-inter-onset-ms;
#X obj 131 187 r beat-inter-onset-ms;
#X obj 71 91 r metronome-switch;
#X obj 161 377 f;
#X obj 204 369 + 1;
#X obj 244 392 + 1;
#X obj 244 369 r bars-per-loop;
#X obj 204 392 %;
#X obj 485 219 r beat;
#X obj 485 242 + 1;
#X obj 485 265 s beat-display;
#X obj 355 219 r bar;
#X obj 355 265 s bar-display;
#X obj 161 421 s bar;
#X obj 161 337 select 0;
#X obj 71 295 t f f;
#X connect 0 0 10 1;
#X connect 2 0 23 0;
#X connect 3 0 5 0;
#X connect 4 0 8 0;
#X connect 5 0 6 0;
#X connect 5 1 7 1;
#X connect 6 0 7 0;
#X connect 7 0 11 0;
#X connect 8 0 9 0;
#X connect 8 0 26 0;
#X connect 9 0 10 0;
#X connect 10 0 8 1;
#X connect 12 0 4 1;
#X connect 13 0 4 0;
#X connect 14 0 15 0;
#X connect 14 0 24 0;
#X connect 15 0 18 0;
#X connect 16 0 18 1;
#X connect 17 0 16 0;
#X connect 18 0 14 1;
#X connect 19 0 20 0;
#X connect 20 0 21 0;
#X connect 22 0 2 0;
#X connect 25 0 14 0;
#X connect 26 0 1 0;
#X connect 26 1 25 0;
#X restore 505 95 pd metronome-data;
#N canvas 541 181 630 529 metronome-audio 0;
#X msg 181 262 1 5 \, 0 5 50;
#X obj 181 285 vline~;
#X obj 181 308 *~;
#X obj 220 307 osc~ 1000;
#X obj 41 394 *~;
#X obj 454 298 dbtorms;
#X obj 454 321 pack f 40;
#X obj 454 344 line~;
#X msg 311 262 1 5 \, 0 5 50;
#X obj 311 285 vline~;
#X obj 311 308 *~;
#X obj 350 307 osc~ 500;
#X obj 311 234 t b;
#X obj 454 192 r metronome-volume;
#X obj 454 225 moses 41;
#X obj 454 248 t b;
#X msg 454 271 0;
#X obj 351 444 dac~ 1 2;
#X obj 351 394 *~;
#X obj 391 394 r metronome-dac-stereo;
#X obj 41 444 s~ metronome-signal;
#X obj 41 123 f;
#X obj 41 36 r beat;
#X obj 41 76 select 0;
#X obj 41 285 vline~;
#X obj 41 308 *~;
#X obj 181 234 t b;
#X obj 81 123 r bar;
#X obj 41 166 select 0;
#X obj 80 307 osc~ 1500;
#X msg 41 262 1 5 \, 0 5 50;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 4 0;
#X connect 3 0 2 1;
#X connect 4 0 18 0;
#X connect 4 0 20 0;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 7 0 4 1;
#X connect 8 0 9 0;
#X connect 9 0 10 0;
#X connect 10 0 4 0;
#X connect 11 0 10 1;
#X connect 12 0 8 0;
#X connect 13 0 14 0;
#X connect 14 0 15 0;
#X connect 14 1 5 0;
#X connect 15 0 16 0;
#X connect 16 0 5 0;
#X connect 18 0 17 0;
#X connect 18 0 17 1;
#X connect 19 0 18 1;
#X connect 21 0 28 0;
#X connect 22 0 23 0;
#X connect 23 0 21 0;
#X connect 23 1 12 0;
#X connect 24 0 25 0;
#X connect 25 0 4 0;
#X connect 26 0 0 0;
#X connect 27 0 21 1;
#X connect 28 0 30 0;
#X connect 28 0 0 0;
#X connect 28 1 26 0;
#X connect 29 0 25 1;
#X connect 30 0 24 0;
#X restore 505 127 pd metronome-audio;
#N canvas 434 187 825 727 measure-pings 0;
#X obj 110 126 f;
#X obj 110 39 r beat;
#X obj 110 79 select 0;
#X obj 110 313 netreceive 57120;
#X msg 110 259 list server downbeat;
#X obj 110 209 t b b;
#X msg 310 259 list server beat;
#X obj 310 209 t b b;
#X obj 110 397 route perf-1 perf-2 perf-3 perf-4;
#X obj 360 209 s ping-timer-reset;
#X floatatom 110 675 10 0 0 0 - - - 0;
#X floatatom 190 595 10 0 0 0 - - - 0;
#X floatatom 260 525 10 0 0 0 - - - 0;
#X floatatom 330 455 10 0 0 0 - - - 0;
#X obj 160 209 s ping-timer-reset;
#X text 341 69 This logic ensures that we distinguish the downbeat
(i.e. \, beat 1 of measure 1 in the loop) from all other beats., f
26;
#X obj 110 651 avg-ping-abs 1 10;
#X obj 190 571 avg-ping-abs 2 10;
#X obj 260 501 avg-ping-abs 3 10;
#X obj 330 431 avg-ping-abs 4 10;
#X obj 150 126 r bar;
#X obj 110 169 select 0;
#X obj 246 357 s connected-clients-set;
#X obj 110 621 client-fill-abs 1;
#X obj 535 356 r perf-1-quack-min-fill;
#X obj 575 380 r perf-1-quack-max-fill;
#X obj 535 380 +;
#X obj 535 404 / 2;
#X floatatom 565 434 5 0 0 0 - - - 0;
#X obj 535 540 +;
#X obj 535 564 / 2;
#X floatatom 565 594 5 0 0 0 - - - 0;
#X obj 535 516 r perf-1-remote-quack-min-fill;
#X obj 575 540 r perf-1-remote-quack-max-fill;
#X obj 535 618 s quack-buffering-remote;
#X text 531 246 Get the average fill value on the remote and local
sides of the quacktrip call. These values are needed to compute the
appropriate delay of the client signal., f 30;
#X obj 535 458 s quack-buffering-local;
#X connect 0 0 21 0;
#X connect 1 0 2 0;
#X connect 2 0 0 0;
#X connect 2 1 7 0;
#X connect 3 0 8 0;
#X connect 3 1 22 0;
#X connect 4 0 3 0;
#X connect 5 0 4 0;
#X connect 5 1 14 0;
#X connect 6 0 3 0;
#X connect 7 0 6 0;
#X connect 7 1 9 0;
#X connect 8 0 23 0;
#X connect 8 1 17 0;
#X connect 8 2 18 0;
#X connect 8 3 19 0;
#X connect 16 0 10 0;
#X connect 17 0 11 0;
#X connect 18 0 12 0;
#X connect 19 0 13 0;
#X connect 20 0 0 1;
#X connect 21 0 5 0;
#X connect 21 1 7 0;
#X connect 23 0 16 0;
#X connect 24 0 26 0;
#X connect 25 0 26 1;
#X connect 26 0 27 0;
#X connect 27 0 28 0;
#X connect 27 0 36 0;
#X connect 29 0 30 0;
#X connect 30 0 31 0;
#X connect 30 0 34 0;
#X connect 32 0 29 0;
#X connect 33 0 29 1;
#X restore 695 65 pd measure-pings;
#X msg 66 289 1;
#X msg 106 289 2;
#X msg 146 289 3;
#X msg 186 289 4;
#X obj 66 232 bng 15 250 50 0 empty empty empty 17 7 0 10 #00faff #000000
#000000;
#X obj 106 232 bng 15 250 50 0 empty empty empty 17 7 0 10 #00faff
#000000 #000000;
#X obj 146 232 bng 15 250 50 0 empty empty empty 17 7 0 10 #00faff
#000000 #000000;
#X obj 186 232 bng 15 250 50 0 empty empty empty 17 7 0 10 #00faff
#000000 #000000;
#X obj 317 100 tgl 15 0 metronome-switch metronome-switch-set metronome
17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 46 232 tgl 15 0 perf-1-remote-audio perf-1-remote-audio-set
r 4 8 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 86 232 tgl 15 0 perf-2-remote-audio perf-2-remote-audio-set
r 4 8 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 126 232 tgl 15 0 perf-3-remote-audio perf-3-remote-audio-set
r 4 8 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 166 232 tgl 15 0 perf-4-remote-audio perf-4-remote-audio-set
r 4 8 0 10 #fcfcfc #000000 #000000 0 1;
#N canvas 1336 44 494 321 remote-audio 0;
#X obj 66 195 clone -s 1 calc-perf-delay-abs 4;
#X obj 66 145 clone -s 1 perf-quack-abs 4;
#X obj 66 62 r quack-controls-vis;
#X msg 66 86 vis \$1 1;
#X connect 2 0 3 0;
#X connect 3 0 1 0;
#X restore 695 125 pd remote-audio;
#X obj 221 222 tgl 15 0 limiter-switch limiter-switch-set l 4 7 0 10
#fcfcfc #000000 #000000 0 1;
#N canvas 733 61 895 470 TODO 0;
#X text 89 46 TODO:;
#X text 89 196 2) make a client patch that incorporates a quacktrip
panel and netsend for ping measurement. otherwise \, it doesn't look
like anything needs to be added.;
#X text 89 76 1) make a mechanism to measure ping manually for all
performers in order to determine one fixed average ping. would be nice
to show mean/min/max/std. this will stabilize the perf-\$1-remote-delay
value. a fixed delay value might not be the best strategy \, but it
will still be good to be able to get these metrics on demand and separately
from the metronome (which currently triggers the measurement).;
#X text 89 256 3) now that [perf-remote-delay-abs] is inside [perf-quack-abs]
in order to delay incoming signal at the source (from the server's
perspective) \, we have to put a [pipe] on the "gate" control data
inside [perf-dsp]. we could use an incoming "gate" control value to
poll the current ping and fill values. that would incorporate the dynamically
changing metrics \, and once that signal is injected into a delay buffer
to loop \, it's locked in.;
#X restore 502 362 pd TODO;
#X obj 66 333 s quack-controls-vis;
#X floatatom 287 237 5 0 0 1 clients connected-clients-set connected-clients
0;
#X connect 29 0 45 0;
#X connect 30 0 45 0;
#X connect 31 0 45 0;
#X connect 32 0 45 0;
#X connect 33 0 29 0;
#X connect 34 0 30 0;
#X connect 35 0 31 0;
#X connect 36 0 32 0;
#X coords 0 -1 1 1 380 210 2 40 50;
#X restore 75 29 pd master-control-panel;
#N canvas 577 125 678 491 performer-control-panels 0;
#X obj 100 100 perf-control-panel 1;
#X obj 215 100 perf-control-panel 2;
#X obj 330 100 perf-control-panel 3;
#X obj 445 100 perf-control-panel 4;
#X coords 0 -1 1 1 460 300 2 100 100;
#X restore 35 269 pd performer-control-panels;
